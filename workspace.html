<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title>GetVeloce Workspace</title>

    <!-- ChiliPeppr is based on bootstrap CSS. -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- jQuery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- Customized version of require.js for ChiliPeppr. Please see require.js docs for how
    ChiliPeppr's dependency system works as it's based on require.js. -->
    <script type="text/javascript" src="//i2dcui.appspot.com/js/require.js"></script>

    <!-- ChiliPeppr workspace CSS. -->
    <link rel="stylesheet" type="text/css" href="css/workspace.css">

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- ChiliPeppr workspace JS. -->
    <script type="text/javascript" src="js/workspace.js"></script>
    <script type="text/javascript" src="js/widget-jsps.js"></script>

</head>

<body>

    <!-- Navigation bar -->
    <ul id="navigation-bar" class="navigation-bar">

        <li class="pull-left">
            <i id="navigation-bar-collapse" class="fa fa-angle-left fa-2x"></i>
        </li>

        <li class="pull-right">
            <input id="hide-show-widget-jsps" class="navigation-bar-item" type="button" value="JSPS">
        </li>

    </ul>
    <!-- /Navigation bar -->

    <!-- Navigation bar collapsed -->
    <ul id="navigation-bar-collapsed" class="navigation-bar-collapsed">

        <li class="pull-left">
            <i id="navigation-bar-decollapse" class="fa fa-bars fa-2x"></i>
        </li>

    </ul>
    <!-- /Navigation bar collapsed -->

    <div id="com-chilipeppr-widget-flash-instance"></div>

    <div id="com-chilipeppr-workspace-sample" class="xhidden">

        <!-- JSPS widget -->
        <div id="widget-jsps-container" class="col-md-4 col-pad10">

          <!--Put HTML Contents of Widget Here-->
          <div id="com-chilipeppr-widget-serialport" class="panel panel-default com-chilipeppr-widget-serialport">

              <div class="panel-heading widget-drag-handle">

                  <div class="btn-group pull-right" style="padding-right:4px;">
                      <button id="hide-show-widget-jsps-on-widget" type="button" class="btn btn-xs btn-default disconnect"><span class="glyphicon glyphicon-remove-sign" style="color: red;"></span></button>
                  </div>

                  <div class="btn-group pull-right" style="padding-right:4px;">
                      <button type="button" class="btn btn-xs btn-default refresh" data-toggle="popover" data-placement="auto" data-container="body" data-content="Reload serial port list from Serial Port JSON Server. This button sends the command 'list' to SPJS." data-trigger="hover"><span class="glyphicon glyphicon-refresh"></span></button>
                      <button type="button" class="btn btn-xs btn-default disconnect" data-toggle="popover" data-placement="auto" data-container="body" data-content="Disconnect from Serial Port JSON Server" data-trigger="hover"><span class="glyphicon glyphicon-remove-sign"></span></button>
                  </div>

                  <div class="title" style="">
                      <span class="panel-title">Serial Port JSON Server
                      <span class="serial-port-version"></span>
                      <div class="subtitle hidden">Multi Port Mode</div>
                      <div class="hosttitle"></div>
                      <span class="spjs-notconnectedwarning alert-danger" xstyle="font-size:9px">Disconnected</span>
                      </span>

                  </div>
              </div>

              <div class="panel-body com-chilipeppr-widget-serialport-body">

                  <div class="container-fluid">

                      <!-- Nav tabs -->
                      <ul class="nav nav-tabs" role="tablist">
                          <li role="presentation" class="xactive"><a href="#com-chilipeppr-widget-serialport-portstab" aria-controls="com-chilipeppr-widget-serialport-portstab" role="tab" data-toggle="tab">Port List</a></li>
                          <li role="presentation" class="active"><a href="#com-chilipeppr-widget-serialport-yours" aria-controls="com-chilipeppr-widget-serialport-yours" role="tab" data-toggle="tab">Your Servers</a></li>
                          <li role="presentation" class="xactive hidden"><a href="#com-chilipeppr-widget-serialport-cloud" aria-controls="com-chilipeppr-widget-serialport-cloud" role="tab" data-toggle="tab">Cloud Servers</a></li>
                          <!-- <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Messages</a></li> -->
                          <!-- <li role="presentation"><a href="#settings" aria-controls="settings" role="tab" data-toggle="tab">Settings</a></li> -->
                      </ul>


                      <!-- Tab panes -->
                      <div class="tab-content">

                          <div role="tabpanel" class="tab-pane xactive" id="com-chilipeppr-widget-serialport-portstab">

                              <!-- Tab Ports -->
                              <!-- Serial Port List -->
                              <div style="position:relative;margin:0;padding:0;">
                                  <div class="com-chilipeppr-widget-serialport-disconnected hidden">
                                      <p>SPJS Disconnected.
                                          <button type="button" class="btn btn-xs btn-default refresh"><span class="glyphicon glyphicon-refresh"></span> Reconnect
                                          </button>
                                      </p>
                                  </div>
                                  <div class="row">
                                      <div class="col-xs-12 com-chilipeppr-widget-serialport-bufferindicator well hidden alert alert-danger" style="margin-bottom:0;padding:3px 14px;">
                                          For your CNC device please choose the <span class="buffername">Grbl</span> buffer in the pulldown before connecting.
                                      </div>
                                      <div class="spjs-notconnectedwarning alert alert-danger well" style="margin-bottom:0;padding:3px 14px;">
                                          You are NOT connected to a Serial Port JSON Server. Go to the "Your Servers" tab and connect.
                                      </div>
                                      <div class="col-xs-12 com-chilipeppr-widget-serialport-portlistarea">

                                          <table class="table table-hover table-condensed com-chilipeppr-widget-serialport-portlist">
                                              <tbody>
                                              </tbody>
                                          </table>

                                      </div>
                                  </div>
                              </div>
                              <!-- End Serial Port List -->
                          </div>

                          <div role="tabpanel" class="tab-pane active" id="com-chilipeppr-widget-serialport-yours">


                              <!-- Tab Your Servers -->
                              <div class="row com-chilipeppr-widget-serialport-version hidden">
                                  <div class="col-xs-12">
                                      <div class="alert alert-danger com-chilipeppr-widget-serialport-version-fullmsg" style="margin:0;">
                                          You are running an old version of the Serial Port JSON Server. Latest is 1.80. You are at
                                          <span class="com-chilipeppr-widget-serialport-version-yours">1.1</span> so you should disconnect and download the latest version.
                                      </div>
                                  </div>
                              </div>
                              <!-- End com-chilipeppr-widget-serialport-version -->

                              <div class="row com-chilipeppr-widget-serialport-install">
                                  <div class="col-xs-12">
                                      <div class="alert alert-warning" style="margin:0;">
                                          <div class="recent-server-list-wrapper hidden">
                                              Recent Server List

                                              <p class="recent-server-list" style="padding:0;margin:0;">

                                              </p>
                                              <button class="btn btn-xs btn-default btn-reset-recent-server-list" style="margin-top:6px;">
                                                  Reset List
                                              </button>
                                              <hr style="margin:10px 0 10px 0;padding:0;">
                                          </div>

                                          <ul class="com-chilipeppr-widget-serialport-index">
                                              <li><a href="#com-chilipeppr-widget-serialport-download">Download Serial Port JSON Server</a></li>
                                              <li><a href="#com-chilipeppr-widget-serialport-connect">Connect to Host</a></li>
                                              <li><a href="#com-chilipeppr-widget-serialport-scanHdr">Scan for Hosts</a></li>
                                          </ul>

                                          <p xstyle="padding-top:0;">You need to install and run the Serial Port Json Server on the machine that has the serial port connected to your device.
                                          </p>
                                          <p>Typically you will install the server on your localhost as this Serial Port Widget first looks there for a webocket connection. </p>
                                          <p>Optionally you may run the Serial Port JSON Server on another host and directly connect to the IP address by typing it in below. This is handy if you're running the server on a Raspberry Pi or Beagle Bone Black for
                                              example. </p>
                                          <p>In case you don't know the IP address of your machine running the server, there is a port scan feature available below to quickly scan your entire subnet for available servers. Most home networks are on the 192.168.1.*
                                              subnet so try scanning with that address first.
                                          </p>

                                          <p>If you already have the server downloaded, you may just need to launch it from the command line.</p>

                                          <a name="com-chilipeppr-widget-serialport-connect"></a>
                                          <p>Connect to a local or remote host here.</p>
                                          <a class="spjs-connect2localhost" href="javascript:">Connect to localhost</a> (ws://localhost:8989/ws)<br>
                                          <a class="spjs-connect2localhostSSL" href="javascript:">Connect to localhost over SSL</a> On v1.92 or greater (wss://localhost:8990/ws)
                                          <div id="com-chilipeppr-widget-serialport-hostconnectmsg"></div>
                                          <div class="input-group">
                                              <input type="text" class="form-control" id="com-chilipeppr-widget-serialport-host" placeholder="Remote Host" />
                                              <span class="input-group-btn">
                                              <button class="btn btn-default" id="com-chilipeppr-widget-serialport-hostbtn">Connect</button>
                                          </span>
                                          </div>

                                          <a name="com-chilipeppr-widget-serialport-scanHdr"></a>
                                          <p>Scan your local subnet</p>
                                          <div id="com-chilipeppr-widget-serialport-scanresult"></div>
                                          <div id="com-chilipeppr-widget-serialport-scanresultcnt"></div>
                                          <div class="input-group">
                                              <input type="text" class="form-control" id="com-chilipeppr-widget-serialport-scan" placeholder="Subnet" value="192.168.1.*" />
                                              <span class="input-group-btn">
                                              <button id="com-chilipeppr-widget-serialport-scanbtn" class="btn btn-default">Scan</button>
                                          </span>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              <!-- End com-chilipeppr-widget-serialport-install -->

                              <!-- End Your Devices Tab -->

                          </div>
                          <!-- End tab pane "Your Devices" -->

                          <div role="tabpanel" class="tab-pane xactive" id="com-chilipeppr-widget-serialport-cloud">

                              <div class="cloud-pickserver">

                                  <div class="row cloud-card" data-ws="ws://67.171.16.121:8989/ws">

                                      <div class="col-xs-6">
                                          <h4>TinyG v8</h4>
                                          <a>ws://tinygv8.chilipeppr.com</a>
                                          <p>115,200 baud rate</p>
                                          <p>Firmware 438.02</p>
                                      </div>

                                      <div class="col-xs-6 com-chilipeppr-widget-serialport-img" style="background-image: url('http://chilipeppr.com/img/tinyg.jpg')"></div>

                                  </div>

                                  <div class="row cloud-card" data-ws="ws://67.171.16.121:8990/ws">
                                      <div class="col-xs-6">
                                          <h4>TinyG v9 (ARM)</h4>
                                          <a>ws://tinygv9.chilipeppr.com</a>
                                          <p>Native USB Speed</p>
                                          <p>Firmware 74.03</p>
                                      </div>

                                      <div class="col-xs-6 com-chilipeppr-widget-serialport-img" style="background-image: url('http://chilipeppr.com/img/tinygv9_angle_wht_midres.jpg')"></div>

                                  </div>

                                  <div class="row cloud-card" data-ws="ws://tinygDue.chilipeppr.com:8989/ws" style="opacity:0.2;">

                                      <div class="col-xs-6">
                                          <h4>TinyG Due (ARM)</h4>
                                          <a>ws://tinygDue.chilipeppr.com</a>
                                          <p>Native USB Speed</p>
                                          <p>Firmware 47.10</p>
                                      </div>

                                      <div class="col-xs-6 com-chilipeppr-widget-serialport-img" style="background-image: url('https://camo.githubusercontent.com/2db1efbced4de80ff6e4706cdf5ccf6842268671/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333733392f31303330313332353239355f333163623064633661625f682e6a7067')"></div>

                                  </div>

                              </div>

                              <!-- End Cloud Devices Tab -->

                          </div>
                          <!-- End tab pane "Cloud Devices" -->
                      </div>
                      <!-- End Tab Panes -->



                      <div class="row com-chilipeppr-widget-serialport-console hidden">
                          <div class="col-xs-12">
                              <div class="com-chilipeppr-widget-serialport-console-log well">
                                  <pre></pre>
                              </div>
                          </div>
                      </div>
                      <div class="row com-chilipeppr-widget-serialport-consoleinput hidden">
                          <form id="com-chilipeppr-widget-serialport-consoleform">
                              <div class="col-xs-12">
                                  <div class="input-group">
                                      <input type="text" class="form-control" placeholder="Type serial port server command" /> <span class="input-group-btn">
                                  <button class="btn btn-default" type="button">Go!</button>
                                  </span>

                                  </div>
                                  <!-- /input-group -->
                              </div>
                          </form>
                      </div>
                      <div class="row com-chilipeppr-widget-serialport-status hidden">
                          <div class="col-xs-12">
                              <div class="well well-sm ">Not connected to localhost:8989 serial port ajax server.</div>
                          </div>
                      </div>
                  </div>
                  <!-- End Container Fluid -->
              </div>
              <div class="panel-footer hidden">
                  <div class="btn-group pull-left" style="padding-right:10px;">
                      <button type="button" class="btn btn-xs btn-default wsconnect disabled" data-toggle="tooltip" data-placement="auto" title="Connect to websocket serial port server."><span class="glyphicon glyphicon-ok-sign"></span>

                      </button>
                      <button type="button" class="btn btn-xs btn-default wsdisconnect" data-toggle="tooltip" data-placement="auto" title="Disconnect from websocket serial port server."><span class="glyphicon glyphicon-remove-sign"></span>

                      </button>
                  </div>
                  <div class="disconnected hidden"> <span class="glyphicon glyphicon-exclamation-sign" style="color:red"></span> Serial Port Server Disconnected</div>
                  <div class="connected "> <span class="glyphicon glyphicon-ok-sign" style="color:gray"></span> Serial Port Server Connected</div>
              </div>
          </div>

          <div id="com-chilipeppr-icon-arduino" class="hidden">
              <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="12px" height="10px"
              viewBox="8 8 16 16">
                  <g id="layer1">
                      <path d="M 5.8940136,24.141315 5.8940136,7.8881254 25.719334,7.8881254 26.076547,8.3346414 26.076547,11.728165 26.880276,12.7105 26.880276,22.62316 26.076547,23.337586 26.076547,24.319921 z" id="path3004" style="fill:#848484;fill-opacity:0.59574465;stroke:none"
                      />
                      <rect width="4.4651618" height="3.0363102" x="4.0186458" y="11.906771" id="rect3774" style="fill:#535353;fill-opacity:1;stroke:none" />
                      <rect width="1.1609421" height="3.1256135" x="4.9116778" y="19.765455" id="rect3776" style="fill:#353535;fill-opacity:1;stroke:none" />
                      <rect width="2.9470069" height="2.706183" x="6.0514159" y="19.948549" id="rect3778" style="fill:#353535;fill-opacity:1;stroke:none" />
                      <path d="M 12.108423,20.870354 A 0.96299064,0.96299064 0 1 1 10.182442,20.870354 0.96299064,0.96299064 0 1 1 12.108423,20.870354 z" transform="translate(-0.26790943,0.35721337)" id="path3780" style="fill:#c1c1c1;fill-opacity:1;stroke:none" />
                      <path d="M 12.108423,20.870354 A 0.96299064,0.96299064 0 1 1 10.182442,20.870354 0.96299064,0.96299064 0 1 1 12.108423,20.870354 z" transform="translate(2.0320386,0.35721337)" id="path3780-1" style="fill:#c1c1c1;fill-opacity:1;stroke:none" />
                      <rect width="11.255939" height="2.1943557" x="14.255884" y="17.328243" id="rect3800" style="fill:#000000;fill-opacity:1;stroke:none" />
                      <rect width="1.8944077" height="1.9575547" x="6.6151061" y="8.4245281" id="rect3802" style="fill:#d4d4d4;fill-opacity:1;stroke:none" />
                      <rect width="7.7670722" height="0.6946162" x="11.035391" y="8.4245281" id="rect3804" style="fill:#000000;fill-opacity:0.59574465;stroke:none" />
                      <rect width="5.872664" height="0.75776315" x="19.560225" y="8.4245281" id="rect3806" style="fill:#000000;fill-opacity:0.59574465;stroke:none" />
                      <rect width="6.1883988" height="0.6946162" x="13.877003" y="22.758879" id="rect3808" style="fill:#000000;fill-opacity:0.59574465;stroke:none" />
                      <rect width="4.4202847" height="0.63146925" x="20.570576" y="22.758879" id="rect3810" style="fill:#000000;fill-opacity:0.59574465;stroke:none" />
                      <path d="M 26.71115,12.803334 A 0.44202849,0.44202849 0 1 1 25.827093,12.803334 0.44202849,0.44202849 0 1 1 26.71115,12.803334 z" transform="translate(-0.26790943,0.35721337)" id="path3812" style="fill:#ffffff;fill-opacity:0.59574465;stroke:none" />
                      <path d="M 26.648003,21.643904 A 0.44202849,0.44202849 0 1 1 25.763946,21.643904 0.44202849,0.44202849 0 1 1 26.648003,21.643904 z" transform="translate(-0.26790943,0.35721337)" id="path3814" style="fill:#ffffff;fill-opacity:0.59574465;stroke:none" />
                      <path d="M 10.48239,23.127857 A 0.41045502,0.41045502 0 1 1 9.6614797,23.127857 0.41045502,0.41045502 0 1 1 10.48239,23.127857 z" transform="translate(-0.26790943,0.35721337)" id="path3816" style="fill:#ffffff;fill-opacity:0.59574465;stroke:none" />
                      <path d="M 10.608684,8.5409164 A 0.41045502,0.41045502 0 1 1 9.7877738,8.5409164 0.41045502,0.41045502 0 1 1 10.608684,8.5409164 z" transform="translate(-0.26790943,0.35721337)" id="path3818" style="fill:#ffffff;fill-opacity:0.59574465;stroke:none" />
                  </g>
              </svg>
          </div>


          <!-- Modal -->
          <div class="modal fade" id="com-chilipeppr-serialport-modalconfig" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="myModalLabel">Script for <span class="modalconfig-port">ttyUSB0</span> on <span class="modalconfig-url">ws://10.1.1.136:8989/ws</span></h4>
                      </div>
                      <div class="modal-body" style="padding: 10px 15px;">
                          <h5>Startup script that runs when you open this port</h5>

                          <div class="alert-warning">

                              <div class="btn-group pull-right" style="margin-right:0;">
                                  <div class="dropdown open">
                                      <button type="button" class="btn btn-xs btn-default dropdown-toggle"
                                          data-toggle="dropdown" data-original-title="" title=""><span class="caret"></span>
                                      </button>
                                      <div class="dropdown-backdrop"></div>
                                      <ul class="dropdown-menu dropdown-menu-scripts dropdown-menu-right" role="menu">
                                          <li role="presentation" class="dropdown-header recent-files">Recent Port Config Files</li>
                                          <!--<li class="recent-file-item"><a href="javascript:">org-jscut-gcode-bart.gcode <span class="lastModifyDate">8/6/2015, 6:30:19 PM</span> 53KB</a></li>-->
                                          <!--<li class="recent-file-item"><a href="javascript:">org-jscut-gcode-noapple.gcode <span class="lastModifyDate">6/20/2015, 8:01:06 PM</span> 531KB</a></li>-->
                                      </ul>
                                  </div>
                              </div>
                              <p class="msg" style="padding:10px">Show alerts here.</p>
                          </div>

                          <textarea class="form-control" rows="5" placeholder="$xvm=1&#10;$1po=1&#10;$1pl=0.85">
                          </textarea>

                          <p class="modalconfig-portid" style="font-size:8px;color:silver;margin-bottom:0;"></p>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button type="button" class="btn btn-primary modalconfig-save-btn" data-id="">Save changes</button>
                      </div>
                  </div>
              </div>
          </div>


        </div>
        <!-- /JSPS widget -->

        <div class="container-fluid">
            <div class="row">

            </div>
        </div>
    </div>

    <script src="js/style.js"></script>
</body>

</html>
